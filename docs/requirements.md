# 프로젝트 요구사항 문서

## 1. 프로젝트 개요

**프로젝트명**: Simple OS for My Laptop  
**목적**: Rust로 작성된 초저전력 노트북 운영체제 커널 개발  
**시작일**: 2024년  
**현재 단계**: 1단계 - 전체 방향 정의 및 아키텍처 설계

## 2. 핵심 목표

### 2.1 기능적 목표

1. **독립적인 OS 커널**
   - Rust로 작성된 완전히 독립적인 운영체제 커널
   - 리눅스 커널과 완전히 독립적인 구현
   - `no_std` 환경에서 동작

2. **기본 시스템 기능**
   - 프로세스 관리 및 스케줄링
   - 메모리 관리 (물리/가상)
   - 파일시스템 지원 (FAT32)
   - 기본 드라이버 (키보드, 디스플레이, 저장장치, 네트워크)

3. **전력 관리**
   - ACPI 기반 전력 제어
   - 동적 CPU 클럭 스케일링 (DVFS)
   - 효율적인 유휴 상태 관리

4. **사용자 인터페이스**
   - 기본 Shell 구현
   - GUI 시스템 (후기 단계)

### 2.2 비기능적 목표

| 항목 | 목표 값 | 우선순위 |
|------|---------|----------|
| 부팅 시간 | 5초 이내 | 높음 |
| 유휴 전력 소비 | 5W 이하 | 매우 높음 |
| 메모리 사용량 | 최소 64MB | 중간 |
| 안정성 | 커널 패닉 없는 장시간 운영 | 매우 높음 |
| 응답성 | 시스템 콜 지연 < 1μs | 중간 |

## 3. 기능 요구사항

### 3.1 MVP (Minimum Viable Product)

**Phase 0: 기본 인프라**
- [x] 프로젝트 구조 설계
- [x] 아키텍처 문서 작성
- [ ] Rust 개발 환경 구축
- [ ] 기본 커널 부팅
- [ ] 텍스트 출력 (VGA 또는 시리얼)

**Phase 1: 핵심 기능**
- [ ] 인터럽트 핸들러 구현
- [ ] 메모리 관리 (물리/가상)
- [ ] 힙 할당자 구현
- [ ] 기본 드라이버 (타이머, 키보드, VGA)
- [ ] 프로세스 스케줄러
- [ ] 시스템 콜 인터페이스
- [ ] 기본 Shell 구현

### 3.2 Phase 2: 고급 기능

- [ ] 전력 관리 시스템 (ACPI 파싱)
- [ ] 동적 전력 스케일링
- [ ] 파일시스템 (FAT32 읽기/쓰기)
- [ ] 네트워크 드라이버 및 스택
- [ ] 추가 드라이버 (저장장치, 네트워크)

### 3.3 Phase 3: 사용자 인터페이스

- [ ] GUI 시스템 (프레임버퍼 기반)
- [ ] 창 관리자
- [ ] 기본 애플리케이션 (텍스트 에디터, 파일 관리자)

### 3.4 Phase 4: 최적화 및 확장

- [ ] 멀티코어 지원 (SMP)
- [ ] Sleep/Resume 지원
- [ ] 보안 기능 강화
- [ ] 성능 최적화
- [ ] 추가 파일시스템 지원

## 4. 제약사항

### 4.1 기술적 제약사항

- **언어**: Rust (nightly) 필수
- **환경**: `no_std` 환경
- **아키텍처**: x86_64 우선
- **의존성**: 최소한의 외부 크레이트 사용

### 4.2 하드웨어 제약사항

- **CPU**: x86_64 아키텍처만 지원 (초기)
- **메모리**: 최소 64MB RAM 필요
- **부팅**: UEFI 우선, BIOS 레거시 선택적

### 4.3 개발 제약사항

- **리소스**: 개인 프로젝트 수준의 개발 리소스
- **테스트**: QEMU 우선, 실제 하드웨어는 제한적
- **문서화**: 한국어 우선, 영어는 선택적

## 5. 우선순위

### 5.1 높은 우선순위

1. 기본 커널 부팅 및 초기화
2. 인터럽트 처리
3. 메모리 관리
4. 기본 드라이버 (시리얼, VGA, 키보드, 타이머)
5. 전력 관리 기본 기능

### 5.2 중간 우선순위

1. 프로세스 스케줄러
2. 시스템 콜 인터페이스
3. 파일시스템 (FAT32)
4. Shell 구현
5. 네트워크 기본 지원

### 5.3 낮은 우선순위

1. GUI 시스템
2. 멀티코어 지원
3. 고급 전력 관리 기능
4. 보안 기능 강화
5. 추가 파일시스템

## 6. 성공 기준

### 6.1 MVP 성공 기준

- [ ] 커널이 성공적으로 부팅됨
- [ ] 텍스트 출력이 정상적으로 동작함
- [ ] 키보드 입력을 받을 수 있음
- [ ] 기본 Shell이 동작함
- [ ] 전력 관리 기본 기능이 동작함

### 6.2 Phase 1 성공 기준

- [ ] 모든 MVP 기능이 완료됨
- [ ] 커널이 1시간 이상 안정적으로 동작함
- [ ] 부팅 시간이 5초 이내임
- [ ] 유휴 전력 소비가 측정 가능함

### 6.3 최종 목표

- [ ] 모든 계획된 기능이 구현됨
- [ ] 실제 노트북에서 정상 동작함
- [ ] 성능 목표를 달성함
- [ ] 문서화가 완료됨

## 7. 리스크 및 대응 방안

### 7.1 기술적 리스크

| 리스크 | 영향도 | 확률 | 대응 방안 |
|--------|--------|------|-----------|
| 하드웨어 호환성 문제 | 높음 | 중간 | QEMU에서 충분히 테스트 후 실제 하드웨어 테스트 |
| ACPI 구현 복잡도 | 높음 | 높음 | 단계별 구현, 참고 OS 프로젝트 활용 |
| 성능 목표 미달성 | 중간 | 중간 | 프로파일링 및 최적화, 목표 조정 |
| 메모리 안전성 문제 | 매우 높음 | 낮음 | Rust 타입 시스템 활용, 철저한 테스트 |

### 7.2 개발 리스크

| 리스크 | 영향도 | 확률 | 대응 방안 |
|--------|--------|------|-----------|
| 개발 일정 지연 | 중간 | 중간 | 단계별 마일스톤 설정, 우선순위 조정 |
| 문서화 부족 | 낮음 | 중간 | 개발과 병행하여 문서화 |
| 테스트 커버리지 부족 | 높음 | 중간 | 단위 테스트 작성, 통합 테스트 |

## 8. 의존성 관리

### 8.1 필수 의존성

- `bootloader`: 부트로더 통합 (필수)
- `x86_64`: 아키텍처 지원 (필수)
- `volatile`: 하드웨어 접근 (필수)
- `spin`: 동기화 (필수)

### 8.2 선택적 의존성

- `acpi`: ACPI 파싱 (Phase 2)
- `pci`: PCI 디바이스 (Phase 2)
- `embedded-graphics`: GUI (Phase 3)
- `smoltcp`: 네트워크 (Phase 2)

### 8.3 의존성 정책

- 최소한의 의존성 사용
- 크레이트 선택 시 메인테넌스 상태 확인
- 라이선스 호환성 확인
- 보안 취약점 모니터링

## 9. 테스트 전략

### 9.1 단위 테스트

- 각 모듈별 단위 테스트 작성
- `no_std` 환경에서 테스트 가능하도록 설계
- 목표 커버리지: 70% 이상

### 9.2 통합 테스트

- 모듈 간 상호작용 테스트
- 시스템 콜 테스트
- 드라이버 통합 테스트

### 9.3 하드웨어 테스트

- QEMU에서 기본 테스트
- 실제 하드웨어에서 검증
- 다양한 하드웨어 구성 테스트

### 9.4 성능 테스트

- 부팅 시간 측정
- 전력 소비 측정
- 메모리 사용량 모니터링
- 시스템 콜 성능 측정

## 10. 문서화 요구사항

### 10.1 코드 문서화

- 모든 공개 API에 대한 문서 주석
- 복잡한 알고리즘에 대한 설명
- `cargo doc`으로 생성 가능한 문서

### 10.2 아키텍처 문서

- 시스템 아키텍처 설명
- 모듈 간 상호작용
- 설계 결정 기록 (ADR)

### 10.3 사용자 문서

- 설치 가이드
- 사용자 매뉴얼
- 문제 해결 가이드

### 10.4 개발자 문서

- 개발 환경 설정 가이드
- 기여 가이드
- 코드 스타일 가이드

---

**문서 버전**: 1.0  
**최종 업데이트**: 2024년  
**작성자**: Simple OS 개발팀

